(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226539"],{e7d5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card",staticStyle:{height:"95%"}},[a("div",{staticClass:"card__title"},[a("b-row",[a("b-col",{staticStyle:{"max-width":"max-content !important"}},[a("span",[t._v("To Do List")])]),a("b-col",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{"padding-right":"10px"}},[a("font-awesome-icon",{staticStyle:{"font-size":"medium",color:"#333399"},attrs:{icon:"circle",size:"sm"}})],1),a("span",{staticStyle:{"padding-right":"10px","font-size":"12px !important","font-weight":"normal !important",color:"#666666"}},[t._v("Prospect")]),a("span",{staticStyle:{"padding-right":"10px"}},[a("font-awesome-icon",{staticStyle:{"font-size":"medium",color:"#00cc33"},attrs:{icon:"circle",size:"sm"}})],1),a("span",{staticStyle:{"padding-right":"10px","font-size":"12px !important","font-weight":"normal !important",color:"#666666"}},[t._v("Customer")]),a("span",[a("ABSButton",{attrs:{text:"Log Book",classButton:"button button--new",classIcon:"icon-style-1",disabled:null==t.ButtonStatus||!t.ButtonStatus.btnAddLogBook},on:{click:t.doAddLogBook}}),a("ABSButton",{attrs:{text:"View All",classButton:"button button--new",classIcon:"icon-style-1",disabled:!1},on:{click:t.doViewAllToDoList}})],1)])],1)],1),a("div",{staticClass:"card__body"},[a("b-table",{attrs:{responsive:!0,striped:!0,bordered:!1,outlined:!1,small:!1,hover:!1,dark:!1,fixed:!1,"foot-clone":!1,fields:t.ToDoListHeader,items:t.ToDoList,thStyle:"padding: 5px !important;"},on:{"row-clicked":t.viewClicked},scopedSlots:t._u([{key:"cell(no)",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"cell(status)",fn:function(e){return[a("span",[a("b-badge",{style:"background-color:"+e.item.status_colour+"; width: 75px; padding: 6px !important; border-radius: 4px !important; font-weight: normal !important;"},[t._v(t._s(e.item.status))])],1)]}},{key:"cell(last_action)",fn:function(e){return[a("span",[t._v(t._s(e.item.last_action&&""!==e.item.last_action?t.momentDateFormatting(e.item.last_action,"DD/MM/YYYY HH:mm"):"-"))])]}},{key:"cell(next_action)",fn:function(e){return[a("span",[t.IsWarning(e.item.next_action)?a("font-awesome-icon",{staticStyle:{color:"red"},attrs:{icon:"exclamation-triangle",size:"sm"}}):t._e(),t._v(" "+t._s(e.item.next_action&&""!==e.item.next_action?t.momentDateFormatting(e.item.next_action,"DD MMM YYYY"):"-")+" ")],1)]}},{key:"cell(action)",fn:function(e){return[a("b-row",[a("b-col",{staticStyle:{"padding-left":"20% !important","padding-top":"2px"}},[a("span",[a("b-badge",{staticStyle:{width:"15px",height:"15px",padding:"6px !important","border-radius":"15px !important"},attrs:{variant:"New"==e.item.status?"primary":"success"}})],1)]),a("b-col",{staticStyle:{"padding-left":"20% !important","padding-top":"3px"}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.ToDoListEdit(e.item)}}},[a("font-awesome-icon",{staticClass:"icon-style-default",attrs:{icon:"C"==e.item.action?"phone-square-alt":"V"==e.item.action?"hand-paper":"E"==e.item.action?"utensils":"edit",size:"lg"}})],1)])],1)]}}])})],1)])},o=[],n={data:function(){return{ToDoListHeader:[{key:"no",label:"No",thClass:"badgeHeader_1 radius-left",tdClass:"ContentTable__Center contentFill_1 withAct radius-left"},{key:"status",label:"Status",thClass:"badgeHeader_1 border-white",tdClass:"ContentTable__Center contentFill_1 withAct"},{key:"name",label:"Customer Name",thClass:"badgeHeader_1 border-white",tdClass:"ContentTable contentFill_1 withAct"},{key:"last_action",label:"Last Action",thClass:"badgeHeader_1 border-white",tdClass:"ContentTable__Center contentFill_1 withAct"},{key:"next_action",label:"Next Action",thClass:"badgeHeader_1 border-white",tdClass:"ContentTable__Center contentFill_1 withAct"},{key:"action",label:"Action",thClass:"badgeHeader_1 border-white radius-right",tdClass:"ContentTable__Center contentFill_1 withAct radius-right"}],ToDoList:[]}},computed:{ButtonStatus:function(){return this.$store.getters.getButtonStatus}},methods:{IsWarning:function(t){var e=this.momentDate(new Date(t),"DD/MM/YYYY"),a=e,i=this.momentDate(new Date,"DD/MM/YYYY");return a<i},doViewAllToDoList:function(){var t="MK_ToDoList";if(t&&""!=t&&void 0!=t){var e={isEdit:!1};this.$router.push({name:t,params:e})}},doAddLogBook:function(){var t={isEdit:!1,isView:!0};this.$store.commit("setParamPage",t),this.$router.push({name:"MK_EditToDoList"})},viewClicked:function(t){null!=this.ButtonStatus&&this.ButtonStatus.listEditToDoList&&this.ToDoListEdit(t)},ToDoListEdit:function(t){console.log(JSON.stringify(t,null,2));var e=t;e.isEdit=!0,e.isView=!0,this.$store.commit("setParamPage",e),this.$router.push({name:"MK_EditToDoList"})},getDataToDoList:function(){var t=this,e={option_function_cd:"GenToDoListDash",module_cd:"MK",ss_portfolio_id:this.getDataUser().portfolio_id,user_id:this.getDataUser().user_id};this.CallFunction(e).then((function(e){if(null!=e){t.ToDoList=[];for(var a=new Date,i=0;i<e.Data.length;i++){var o=new Date(e.Data[i].next_action);t.ToDoList.push({cm_contact_id:e.Data[i].cm_contact_id,name:e.Data[i].customer_name,status:e.Data[i].status,status_colour:e.Data[i].customer_status_colour,warning:o<a,next_action:e.Data[i].next_action,last_action:e.Data[i].last_action,action:e.Data[i].action,appointment_type:e.Data[i].appointment_type,row_id:e.Data[i].row_id,lastupdatestamp:e.Data[i].lastupdatestamp})}}}))}},mounted:function(){this.getDataToDoList()}},s=n,l=a("2877"),r=Object(l["a"])(s,i,o,!1,null,null,null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d226539.943d0599.js.map