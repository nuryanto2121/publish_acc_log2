(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba45b"],{3701:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dashboard-page-chart"},[s("div",{staticClass:"dashboard-page-chart__body"},[s("b-row",{staticClass:"dashboardBody"},[s("b-col",{attrs:{md:"12"}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card__title"},[s("b-row",[s("b-col",{staticStyle:{"max-width":"max-content !important"}},[s("span",[t._v("Fleet Maintenance Status")])]),s("b-col",{staticStyle:{"text-align":"right"}},[s("ABSButton",{attrs:{text:"Back",classButton:"button button--back",classIcon:"icon-style-1"},on:{click:t.doBack}})],1)],1)],1),s("div",{staticClass:"card__body"},[s("b-form",{attrs:{"data-vv-scope":"MM_FleetMaintenanceSchedule","data-vv-value-path":"MM_FleetMaintenanceSchedule"}},[s("b-row",[s("b-col",{staticStyle:{"text-align":"center"},attrs:{md:"2"}},[s("img",{staticStyle:{width:"50px"},attrs:{src:a("c079"),alt:""}})]),s("b-col",{attrs:{md:"10"}},[s("b-row",{staticStyle:{"margin-bottom":"10px"}},[s("b-col",{staticStyle:{"padding-left":"0px !important"}},[s("b-row",{staticStyle:{"border-top":"solid 1px #e7eaec","border-left":"solid 1px #e7eaec","border-right":"solid 1px #e7eaec","border-radius":"5px 5px 0px 0px"}},[s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Fleet No")]),s("br"),s("span",[t._v(t._s(t.Model.fleet_no))])]),s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Fleet Type")]),s("br"),s("span",[t._v(t._s(t.Model.fleet_type))])]),s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Driver")]),s("br"),s("span",[t._v(t._s(t.Model.driver))])]),s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Maintenance Type")]),s("br"),s("span",[t._v(t._s(t.Model.maint_type))])]),s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Maintenance Status")]),s("br"),s("span",[t._v(t._s(t.Model.status))])])],1),s("b-row",{staticStyle:{border:"solid 1px #e7eaec","border-radius":"0px 0px 5px 5px"}},[s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Last Maintenance")]),s("br"),s("span",[t._v(t._s(t.momentDateFormatting(t.Model.last_maint,"DD/MM/YYYY")))])]),s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Last Millage")]),s("br"),s("span",[t._v(t._s(t.isCurrency(t.Model.last_millage,0)))])]),s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Current Millage")]),s("br"),s("span",[t._v(t._s(t.isCurrency(t.Model.current_millage,0)))])]),s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Fleet Status")]),s("br"),s("span",[t._v(t._s(t.Model.fleet_status))])]),s("b-col",{staticStyle:{"border-right":"solid 1px #e7eaec",padding:"10px !important","max-width":"20% !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Estimated Available Time")]),s("br"),s("span",[t._v(t._s(t.Model.estimated_avail_date))])])],1)],1)],1),"P"!=t.Model.schedule_status?s("b-row",{staticStyle:{"margin-bottom":"10px"}},[s("b-col",{attrs:{md:"6"}},[s("span",[s("label",[s("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v(t._s(t.titleSchedule))])]),s("ACCRadioButton",{ref:"ref_maintenance_status",attrs:{prop:t.PI_maintenance_status},on:{input:t.OnMaintenanceStatusChange},model:{value:t.Model.maintenance_status,callback:function(e){t.$set(t.Model,"maintenance_status",e)},expression:"Model.maintenance_status"}})],1)],1):t._e(),"U"==t.Model.schedule_status||"S"==t.Model.schedule_status?s("b-row",{staticStyle:{"margin-bottom":"10px"}},[s("b-col",{attrs:{md:"6"}},[s("span",[s("label",["required"==t.PI_maintenance_date.cValidate?s("span",{staticStyle:{color:"red"}},[t._v("* ")]):t._e(),t._v(t._s(t.titleDate))])]),s("ACCDateTime",{ref:"ref_maintenance_date",attrs:{prop:t.PI_maintenance_date},on:{input:t.OnMaintenanceDate},model:{value:t.Model.maintenance_date,callback:function(e){t.$set(t.Model,"maintenance_date",e)},expression:"Model.maintenance_date"}})],1)],1):t._e(),"Q"==t.Model.schedule_status?s("b-row",{staticStyle:{"margin-bottom":"10px"}},[s("b-col",{attrs:{md:"6"}},[s("span",[s("label",["required"==t.PI_reason_code.cValidate?s("span",{staticStyle:{color:"red"}},[t._v("* ")]):t._e(),t._v("Reason Code")])]),s("ACCDropDown",{ref:"ref_reason",attrs:{prop:t.PI_reason_code,label:t.Model.reason_codeLabel},on:{change:t.OnReasonCodeChange},model:{value:t.Model.reason_code,callback:function(e){t.$set(t.Model,"reason_code",e)},expression:"Model.reason_code"}})],1)],1):t._e(),"Q"==t.Model.schedule_status?s("b-row",{staticStyle:{"margin-bottom":"10px"}},[s("b-col",{attrs:{md:"6"}},[s("span",[s("label",[t._v("Reason")])]),s("ACCTextArea",{ref:"ref_reason",attrs:{prop:t.PI_reason},model:{value:t.Model.reason,callback:function(e){t.$set(t.Model,"reason",e)},expression:"Model.reason"}})],1)],1):t._e(),"P"!=t.Model.schedule_status?s("b-row",{staticStyle:{"margin-bottom":"10px"}},[s("b-col",{attrs:{md:"6"}},[s("ABSButton",{attrs:{text:"Confirm",classButton:"btn btn--default",classIcon:"icon-style-default",styleButton:"height: 40px;width: 100%;"},on:{click:t.doSave}})],1)],1):t._e(),"P"==t.Model.schedule_status?s("b-row",{staticStyle:{"margin-bottom":"10px"}},[s("b-col",{staticStyle:{padding:"unset !important"},attrs:{md:"3"}},[s("b-row",{staticStyle:{border:"solid 1px #e7eaec","border-radius":"5px 5px 0px 0px"}},[s("b-col",{staticStyle:{padding:"10px !important"}},[s("span",{staticClass:"lbl-view"},[t._v("Estimated Finish Date")]),s("br"),s("span",[t._v(t._s(t.Model.estimated_finish_date))])])],1)],1)],1):t._e()],1)],1),t._l(t.detail_days,(function(e,a){return s("div",{staticClass:"card",staticStyle:{"margin-bottom":"10px"}},[s("div",{staticClass:"card__title"},[s("b-row",[s("b-col",{staticStyle:{"max-width":"max-content !important"}},[s("span",[t._v(t._s(t.momentDateFormatting(new Date(Date.now()+864e5*a),"dddd, DD MMM YYYY")))])]),s("b-col",{staticStyle:{"text-align":"right"}},[s("span",{staticStyle:{color:"grey"}},[s("b-badge",{attrs:{variant:"danger"}},[t._v(t._s(e[0].total_unsch))]),t._v(" Unschedule "),s("b-badge",{attrs:{variant:"magenta"}},[t._v(t._s(e[0].total_sch))]),t._v(" Scheduled "),s("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(e[0].total_queue))]),t._v(" Queued Up "),s("b-badge",{attrs:{variant:"success"}},[t._v(t._s(e[0].total_on_progress))]),t._v(" On Progress ")],1),s("span",[s("ABSButton",{attrs:{text:"View All",classButton:"button button--back",classIcon:"icon-style-1"},on:{click:function(e){return t.doViewAll(a)}}})],1)])],1)],1),s("div",{staticClass:"card__body"},[s("div",[s("ACCFormList",{ref:"ref_list",refInFor:!0,attrs:{prop:{},title:"",cStatic:"",cClass:"table-style-3_noAct",cHeader:t.scheduleHeader,cData:e},on:{rowClicked:t.rowClicked},scopedSlots:t._u([{key:"last_maint",fn:function(e){return[s("span",[t._v(t._s(t.momentDateFormatting(e.item.last_maint,"DD/MM/YYYY")))])]}},{key:"last_millage",fn:function(e){return[s("span",[t._v(t._s(t.isCurrency(e.item.last_millage,0)))])]}},{key:"current_millage",fn:function(e){return[s("span",[t._v(t._s(t.isCurrency(e.item.current_millage,0)))])]}},{key:"usage",fn:function(e){return[s("span",[t._v(t._s(t.isCurrency(e.item.usage,0)))])]}}],null,!0)})],1)])])}))],2)],1)])])],1)],1)])},n=[],i=(a("8e6e"),a("ade3"));a("ac6a"),a("456d");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var r={data:function(){return{Model:{current_millage:0,detail_day1:[],detail_day2:[],detail_day3:[],driver:"",estimated_avail_date:"",fleet_no:"",fleet_status:"",fleet_type:"",fm_driver_id:0,fm_fleet_mstr_id:0,fm_fleet_type_id:0,last_maint:"",last_millage:0,lastupdatestamp:0,maint_type:"",mm_maintenance_type_id:0,row_id:0,schedule_date:"",schedule_status:"",ss_portfolio_id:0,status:"",time_edit:"",total_on_progress:0,total_queue:0,total_sch:0,total_unsch:0,usage:0,maintenance_status:"",maintenance_date:"",reason_code:"",reason_codeLabel:"",reason:""},titleSchedule:"",titleDate:"",detail_days:[],PI_maintenance_status:{cValidate:"required",cName:"maintenance_status",cId:"rdmaintenance_status",cRadioOptions:[{text:"Yes",value:"Y"},{text:"No",value:"N"}],cRadioDefaultOption:"",cOrder:1,cProtect:!1,cVisible:!0,cGroup:!1,cParentForm:"MM_FleetMaintenanceSchedule",cInputStatus:this.inputStatus},PI_maintenance_date:{cValidate:"required",cName:"date",cOrder:2,cKey:!1,cProtect:!1,cWithTime:!1,cFormat:"dd/MM/yyyy",cParentForm:"MM_FleetMaintenanceSchedule",cInputStatus:this.inputStatus},PI_reason_code:{dataLookUp:{LookUpCd:"GetCmReason",ColumnDB:"reason_cd",InitialWhere:"ss_portfolio_id='"+this.getDataUser().portfolio_id+"'",ParamWhere:"",OrderBy:"",ParamView:"",SourceField:"",DisplayLookUp:""},cValidate:"required",cName:"reason_code",cOrder:1,cKey:!1,cStatic:!1,cProtect:!1,cParentForm:"MM_FleetMaintenanceSchedule",cOption:[],cDisplayColumn:"",cInputStatus:this.inputStatus},PI_reason:{cValidate:"",cName:"reason",cOrder:3,cKey:!1,cProtect:!1,cResize:!1,cReadonly:!1,cRows:3,cMaxRows:3,cSize:"md",cParentForm:"MM_FleetMaintenanceSchedule",cInputStatus:this.inputStatus},scheduleHeader:[{key:"row_number",label:"No",tdClass:"ContentACCList2 notranslate",thClass:"HeaderACCList2"},{key:"fleet_no",label:"Fleet No",tdClass:"ContentACCList2 notranslate th-cus-left",thClass:"HeaderACCList2 S th-cus-center"},{key:"fleet_type",label:"Fleet Type",tdClass:"ContentACCList2 notranslate th-cus-center",thClass:"HeaderACCList2 S th-cus-center"},{key:"last_maint",label:"Last Maint",tdClass:"ContentACCList2 notranslate th-cus-center",thClass:"HeaderACCList2 S th-cus-center"},{key:"last_millage",label:"Last Millage",tdClass:"ContentACCList2 notranslate th-cus-center",thClass:"HeaderACCList2 S th-cus-center"},{key:"current_millage",label:"Current Millage",tdClass:"ContentACCList2 notranslate th-cus-center",thClass:"HeaderACCList2 S th-cus-center"},{key:"usage",label:"Usage",tdClass:"ContentACCList2 notranslate th-cus-center",thClass:"HeaderACCList2 S th-cus-center"},{key:"maint_type",label:"Maint Type",tdClass:"ContentACCList2 notranslate th-cus-center",thClass:"HeaderACCList2 th-cus-center"},{key:"status",label:"Status",tdClass:"ContentACCList2 notranslate th-cus-center",thClass:"HeaderACCList2 th-cus-center"}]}},computed:{paramFromList:function(){var t=this.$store.getters.getParamPage;if(null==t||void 0==t)this.doBack();else{if(!(Object.keys(t).length<1))return t;this.doBack()}},ButtonStatus:function(){return this.$store.getters.getButtonStatus}},methods:{doBack:function(){this.$router.go(-1)},GetDataBy:function(){var t=this,e={option_url:"/OP/OP_FleetMaintSch",line_no:0,id:this.paramFromList.row_id,lastupdatestamp:this.paramFromList.lastupdatestamp};this.getJSON(this.getUrlCRUD(),e).then((function(e){null!=e&&(t.Model=o(o({},t.Model),JSON.parse(e.Data[0].fmm_maintenance_fleet_sch_s)[0]),t.RenderData())}))},OnMaintenanceStatusChange:function(t){switch(this.Model.schedule_status){case"U":case"S":this.PI_maintenance_date.cProtect="N"==t,this.PI_maintenance_date.cValidate="N"==t?"":"required",this.Model.maintenance_date="N"==t?"":this.Model.maintenance_date;break;case"Q":this.PI_reason_code.cProtect="N"==t,this.PI_reason_code.cValidate="N"==t?"":"required",this.PI_reason.cProtect="N"==t,this.Model.reason_code="N"==t?"":this.Model.reason_code,this.Model.reason_codeLabel="N"==t?"":this.Model.reason_codeLabel,this.Model.reason="N"==t?"":this.Model.reason;break;case"P":break}},OnMaintenanceDate:function(t){},rowClicked:function(t,e){var a=t;a.isEdit=!0,a.isView=!0,this.$store.commit("setParamPage",a)},RenderData:function(){switch(this.Model.schedule_status){case"U":this.titleSchedule="Schedule For Maintenance",this.titleDate="Schedule Date",this.Model.maintenance_status="Y";break;case"S":this.titleSchedule="Cancel Schedule",this.titleDate="Reschedule Date",this.Model.maintenance_status="N";break;case"Q":this.titleSchedule="Cancel Queuing",this.Model.maintenance_status="N";break;case"P":break}this.detail_days=[],this.Model.detail_day1&&this.detail_days.push(this.Model.detail_day1),this.Model.detail_day2&&this.detail_days.push(this.Model.detail_day2),this.Model.detail_day3&&this.detail_days.push(this.Model.detail_day3)},doViewAll:function(t){var e=this.paramFromList;e.indexDate=t,this.$store.commit("setParamPage",e),this.$router.push({name:"MM_FleetMaintenanceScheduleDetailViewAll"})},OnReasonCodeChange:function(t){var e=this;this.$nextTick((function(){e.Model.reason_code=t.id,e.Model.reason_codeLabel=t.label,e.Model.reason=t.descs}))},doSave:function(){var t=this;this.$validator._base.validateAll("MM_FleetMaintenanceSchedule").then((function(e){e&&t.alertConfirmation("Are You Sure Want To Save This Data ?").then((function(e){e.value&&(t.$validator.errors.clear("MM_FleetMaintenanceSchedule"),t.M_Update())}))}))},M_Update:function(){var t=this,e={option_url:"/OP/OP_FleetMaintSch",line_no:0,mm_maintenance_fleet_sch_id:this.paramFromList.row_id,ss_portfolio_id:this.getDataUser().portfolio_id,schedule_status:this.Model.schedule_status,schedule_for_maintenance_status:"U"==this.Model.schedule_status?this.Model.maintenance_status:"NULL",schedule_date:"U"==this.Model.schedule_status&&""!=this.Model.maintenance_date?this.Model.maintenance_date:"NULL",cancel_schedule_status:"S"==this.Model.schedule_status?this.Model.maintenance_status:"NULL",reschedule_date:"S"==this.Model.schedule_status&&""!=this.Model.maintenance_date?this.Model.maintenance_date:"NULL",cancel_queuing_status:"Q"==this.Model.schedule_status?this.Model.maintenance_status:"NULL",cancel_cm_reason_id:"Q"==this.Model.schedule_status?this.Model.reason_code:"NULL",cancel_remarks:"Q"==this.Model.schedule_status?this.Model.reason:"NULL",lastupdatestamp:this.paramFromList.lastupdatestamp,user_edit:this.getDataUser().user_id};this.putJSON(this.getUrlCRUD(),e).then((function(e){null!=e&&t.doBack()}))}},mounted:function(){this.GetDataBy()}},c=r,d=a("2877"),_=Object(d["a"])(c,s,n,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d0ba45b.31524011.js.map